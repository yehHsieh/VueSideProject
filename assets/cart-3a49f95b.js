import{B as c,C as r,H as n,S as o}from"./index-784f2748.js";const{VITE_APP_URL:s,VITE_APP_PATH:i}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"barproject",BASE_URL:"/VueSideProject/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},d=c("cart",{state:()=>({carts:[],cartNum:0,total:0,final_total:0,originPrice:0,num:0,data:{user:{name:"",email:"",tel:"",address:""},message:""},loadingItem:""}),actions:{getCart(){r.get(`${s}v2/api/${i}/cart`).then(t=>{this.carts=t.data.data.carts,this.total=t.data.data.total,this.final_total=t.data.data.final_total,this.cartNum=0,this.originPrice=0,this.price=0;for(let a=0;a<this.carts.length;a++)this.cartNum+=this.carts[a].qty,this.originPrice+=this.carts[a].product.origin_price*this.carts[a].qty}).catch(t=>{alert(t.response.data.message)})},submitInf(t){this.data.user.name=t,n.push("/order")},plusProduct(){this.num++},minusProduct(){this.num>0&&this.num--},addToCart(t){const a={product_id:t,qty:this.num};this.$http.post(`${s}/v2/api/${i}/cart`,{data:a}).then(e=>{console.log(e),this.num=0,this.getCart()})},addToOrder(){const t=this.data;r.post(`${s}v2/api/${i}/order`,{data:t}).then(a=>new Promise(e=>{o.fire({icon:"success",title:a.data.message,showConfirmButton:!1,timer:1700}).then(()=>e())})).then(()=>{n.push("/"),window.scrollTo(0,0)})},deleteItem(t){o.fire({reverseButtons:!0,title:"確定刪除?",showCancelButton:!0,cancelButtonText:"取消",confirmButtonText:"確定",confirmButtonColor:"rgba(255, 159, 0, 1)"}).then(a=>{a.isConfirmed&&(this.loadingItem=t.id,r.delete(`${s}v2/api/${i}/cart/${t.id}`).then(e=>{console.log("刪除購物車:",e.data),this.getCart(),this.loadingItem=""}),o.fire("刪除成功!","","success"))})}},getters:{}});export{d as c};
